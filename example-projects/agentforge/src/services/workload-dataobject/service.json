{
  "name": "workload-dataobject",
  "type": "dataobject",
  "version": "0.1.0",
  "description": "Workload data object. Running instances of deployed services with pipeline state.",
  "entry": "index.ts",
  "schema": {
    "fields": [
      { "name": "id", "type": "uuid", "auto": true },
      { "name": "deploymentId", "type": "uuid", "required": true },
      { "name": "servicePath", "type": "string", "required": true },
      { "name": "stage", "type": "enum", "values": ["pending", "validate", "build", "deploy", "running", "failed", "stopped"], "default": "pending" },
      { "name": "logs", "type": "json", "default": [] },
      { "name": "error", "type": "text" },
      { "name": "containerId", "type": "string" },
      { "name": "port", "type": "number" },
      { "name": "createdAt", "type": "date", "auto": true },
      { "name": "updatedAt", "type": "date", "auto": true }
    ]
  },
  "endpoints": [
    { "method": "GET", "path": "/workloads", "description": "List all workloads" },
    { "method": "GET", "path": "/workloads/:id", "description": "Get workload by ID" },
    { "method": "GET", "path": "/deployments/:deploymentId/workloads", "description": "List workloads for a deployment" },
    { "method": "POST", "path": "/workloads", "description": "Create a new workload" },
    { "method": "PATCH", "path": "/workloads/:id", "description": "Update workload state" },
    { "method": "POST", "path": "/workloads/:id/run", "description": "Start the deployment pipeline" },
    { "method": "POST", "path": "/workloads/:id/stop", "description": "Stop a running workload" }
  ],
  "dependencies": ["deployment-dataobject"],
  "tags": ["runtime", "infrastructure"]
}
